!function(e,t){function i(e){return e&&("always"===e.embedded||"load"===e.embedded)}function r(e,t,r,o){var s=a(this,"attrs");s&&t.eachRelationship(function(t,a){var d=s[t];i(d)&&"hasMany"===a.kind&&n.call(this,e,t,a,r,o)},this)}function n(t,i,n,s,d){var l=t.serializerFor(n.type.typeKey),y=a(this,"primaryKey"),u="_"+e.String.pluralize(n.type.typeKey),p=this.keyForRelationship(i,n.kind),c=this.keyForAttribute(i),h=[];d[c]&&(s[u]=s[u]||[],o(d[c],function(e){var i=t.modelFor(n.type.typeKey);r.call(l,t,i,s,e),h.push(e[y]),s[u].push(e)}),d[p]=h,delete d[c])}var a=e.get,o=e.EnumerableUtils.forEach;t.HasManyEmbeddedRecordsMixin=e.Mixin.create({serializeHasMany:function(e,t,r){var n=r.key,o=this.get("attrs");if(!o||!i(o[n]))return this._super(e,t,r),void 0;var s=this.keyForAttribute(n);t[s]=a(e,n).map(function(e){var t=e.serialize(),i=a(this,"primaryKey");return t[i]=a(e,i),null===t.id&&delete t.id,t},this)},extractArray:function(t,i,n){var a=this.keyForAttribute(i.typeKey),s=n[e.String.pluralize(a)];return o(s,function(e){r.call(this,t,i,n,e)},this),this._super(t,i,n)},extractSingle:function(e,t,i,n,a){var o=this.keyForAttribute(t.typeKey),s=i[o];return r.call(this,e,t,i,s),this._super(e,t,i,n,a)}})}(Ember,DS),function(e,t){function i(e){return e&&("always"===e.embedded||"load"===e.embedded)}function r(e,t){var i=e+"_id";t.hasOwnProperty(i)&&delete t[i]}function n(e,t,r,n){var s=o(this,"attrs");s&&t.eachRelationship(function(t,o){var d=s[t];i(d)&&"belongsTo"===o.kind&&a.call(this,e,t,o,r,n)},this)}function a(t,r,n,a,s){var d=this.get("attrs");if(d&&(i(d[e.String.camelize(r)])||i(d[r]))){var l=t.serializerFor(n.type.typeKey),y=(o(l,"primaryKey"),e.String.pluralize(n.type.typeKey)),u=l.keyForRelationship(r,n.kind),p=l.keyForAttribute(r);if(s[p]){a[y]=a[y]||[];{t.modelFor(n.type.typeKey)}s[u]=s[p].id,a[y].push(s[p]),s[p][n.parentType.typeKey+"_id"]=s.id,delete s[p]}}}{var o=e.get;e.EnumerableUtils.forEach}t.HasOneEmbeddedRecordsMixin=e.Mixin.create({serializeBelongsTo:function(e,t,n){var a=n.key,o=this.get("attrs");if(!o||!i(o[a]))return this._super(e,t,n),void 0;var s=this.keyForAttribute(a),d=e.get(a);if(d){t[s]=d.serialize();var l=d.get("id");l&&(t[s].id=l);var y=this.keyForAttribute(n.parentType.typeKey);y&&r(y,t[s]),delete t[s][y]}else t[s]=null},extractSingle:function(e,t,i,r,a){var o=this.keyForAttribute(t.typeKey),s=i[o];return n.call(this,e,t,i,s),this._super(e,t,i,r,a)}})}(Ember,DS),Ember.onLoad("Ember.Application",function(e){e.initializer({name:"mongoidAdapter",initialize:function(e,t){t.register("serializer:mongoid",DS.MongoidSerializer),t.register("adapter:mongoid",DS.MongoidAdapter)}})}),function(e,t){t.MongoidAdapter=t.ActiveModelAdapter.extend({MongoidAdapter:"mongoid"})}(Ember,DS),function(e,t){var i=e.get,r=(e.EnumerableUtils.forEach,t.HasManyEmbeddedRecordsMixin),n=t.HasOneEmbeddedRecordsMixin;t.MongoidSerializer=t.ActiveModelSerializer.extend(r,n,{serializePolymorphicType:function(t,r,n){var a=n.key,o=i(t,a);o&&(a=this.keyForAttribute(a),r._type=e.String.capitalize(o.constructor.typeKey))}})}(Ember,DS);