Ember.onLoad("Ember.Application",function(e){e.initializer({name:"activeModelAdapter",initialize:function(e,i){i.register("serializer:_ams",DS.ActiveModelSerializer),i.register("adapter:_ams",DS.ActiveModelAdapter)}})}),function(e,i){var t=e.EnumerableUtils.forEach;i.ActiveModelAdapter=i.RESTAdapter.extend({defaultSerializer:"_ams",pathForType:function(i){var t=e.String.decamelize(i);return e.String.pluralize(t)},ajaxError:function(r){var n=this._super(r);if(r&&422===r.status){var a=e.$.parseJSON(r.responseText).errors,o={};return t(e.keys(a),function(i){o[e.String.camelize(i)]=a[i]}),new i.InvalidError(o)}return n}})}(Ember,DS),function(e,i){var t=e.get,r=e.EnumerableUtils.forEach;i.ActiveModelSerializer=i.RESTSerializer.extend({keyForAttribute:function(i){return e.String.decamelize(i)},keyForRelationship:function(i,t){return i=e.String.decamelize(i),"belongsTo"===t?i+"_id":"hasMany"===t?e.String.singularize(i)+"_ids":i},serializeHasMany:e.K,serializeIntoHash:function(i,t,r,n){var a=e.String.decamelize(t.typeKey);i[a]=this.serialize(r,n)},serializePolymorphicType:function(i,r,n){var a=n.key,o=t(i,a);a=this.keyForAttribute(a),r[a+"_type"]=e.String.capitalize(o.constructor.typeKey)},typeForRoot:function(i){var t=e.String.camelize(i);return e.String.singularize(t)},normalize:function(e,i,t){return this.normalizeLinks(i),this._super(e,i,t)},normalizeLinks:function(i){if(i.links){var t=i.links;for(var r in t){var n=e.String.camelize(r);n!==r&&(t[n]=t[r],delete t[r])}}},normalizeRelationships:function(e,i){var t,n;this.keyForRelationship&&e.eachRelationship(function(e,a){if(a.options.polymorphic){if(t=this.keyForAttribute(e),n=i[t],n&&n.type)n.type=this.typeForRoot(n.type);else if(n&&"hasMany"===a.kind){var o=this;r(n,function(e){e.type=o.typeForRoot(e.type)})}}else t=this.keyForRelationship(e,a.kind),n=i[t];i[e]=n,e!==t&&delete i[t]},this)}})}(Ember,DS),function(e,i){function t(i,a,o,s,l){var u=r(a,"attrs");u&&o.eachRelationship(function(a,o){var y,p,c,h,d=u[a],f=i.serializerFor(o.type.typeKey),m=r(f,"primaryKey");if("hasMany"===o.kind&&d&&("always"===d.embedded||"load"===d.embedded)){if(p="_"+e.String.pluralize(o.type.typeKey),y=this.keyForRelationship(a,o.kind),c=this.keyForAttribute(a),h=[],!s[c])return;l[p]=l[p]||[],n(s[c],function(e){var r=i.modelFor(o.type.typeKey);t(i,f,r,e,l),h.push(e[m]),l[p].push(e)}),s[y]=h,delete s[c]}},a)}var r=e.get,n=e.EnumerableUtils.forEach;i.EmbeddedRecordsMixin=e.Mixin.create({serializeHasMany:function(e,i,t){var n=t.key,a=r(this,"attrs"),o=a&&a[n]&&"always"===a[n].embedded;o&&(i[this.keyForAttribute(n)]=r(e,n).map(function(e){var i=e.serialize(),t=r(this,"primaryKey");return i[t]=r(e,t),i},this))},extractSingle:function(e,i,r,n,a){var o=this.keyForAttribute(i.typeKey),s=r[o];return t(e,this,i,s,r),this._super(e,i,r,n,a)},extractArray:function(i,r,a){var o=this.keyForAttribute(r.typeKey),s=a[e.String.pluralize(o)];return n(s,function(e){t(i,this,r,e,a)},this),this._super(i,r,a)}})}(Ember,DS);